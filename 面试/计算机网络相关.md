### [HTTP三、四次握手](https://blog.csdn.net/qq_38950316/article/details/81087809)

![这里写图片描述](https://img-blog.csdn.net/20170605110405666?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXpjc3U=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast)

![这里写图片描述](https://img-blog.csdn.net/20170606084851272?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXpjc3U=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast)

1. 为什么三次握手而不是两次？

> 为了防止失效的连接请求又传送到主机，因而产生错误.如果使用的是两次握手建立连接，假设有这样一种场景，客户端发送了第一个请求连接并且没有丢失，只是因为在网络结点中滞留的时间太长了，由于TCP的客户端迟迟没有收到确认报文，以为服务器没有收到，此时重新向服务器发送这条报文，此后客户端和服务器经过两次握手完成连接，传输数据，然后关闭连接。此时此前滞留的那一次请求连接，网络通畅了到达了服务器，这个报文本该是失效的，但是，两次握手的机制将会让客户端和服务器再次建立连接，这将导致不必要的错误和资源的浪费。

2. 如果建立了连接，客户端突然出现故障怎么办？

> TCP设有一个**保活计时器**，显然，客户端如果出现故障，服务器不能一直等下去，白白浪费资源。服务器每收到一次客户端的请求后都会重新复位这个计时器，时间通常是设置为2小时，若两小时还没有收到客户端的任何数据，服务器就会发送一个**探测报文段**，以后每隔75分钟发送一次。若一连发送10个探测报文仍然没反应，服务器就认为客户端出了故障，接着就关闭连接。

3. [在浏览器输入www.xxx.com后执行的全过程？]()

> 1. URL解析：判断该URL是否合法，是否包含关键字。
> 2. DNS查询：解析www.baaidu,com得到服务器的IP地址（迭代、递归）
> 3. TCP连接：浏览器与服务器建立TCP连接（三次握手），经过TCP/IP四层模型，每层都要对数据进行封装
> 4. 请求报文：浏览器发去http请求报文（头部包括请求方法、目的地址、遵循的协议）（SYN洪泛攻击）
> 5. 响应报文：服务器收到请求报文后，对其进行解析验证无误后发出响应
> 6. 接收响应：浏览器收到服务的响应报文后，进行分析，解析
> 7. 渲染页面：不同的浏览器内核，渲染过程也不完全相同，但大致流程都差不多。

### 拥塞控制

防止过多数据注入到网络中，使网络中路由器或者链路不至于过载。提高网络利用率，降低丢包率,并保证网络资源的对每条数据流的公平性。具有全局性。

1. 慢开始

   > 指数增长，当窗口小于等于门限值

2. 拥塞控制

   >线性增长，当窗口大于等于门限值

3. 快重传

   >收到3个相同ACK，立即重传该数据包

4. 快恢复

   > 当发送方连续收到三个重复确认，就执行“乘法减小”算法，把慢开始门限ssthresh减半

![在这里插入图片描述](https://img-blog.csdnimg.cn/20190731184935595.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQxNDMxNDA2,size_16,color_FFFFFF,t_70)









